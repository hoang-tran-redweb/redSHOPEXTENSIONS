var geocoder,map,startpoint,selected,closest,markers=[];function initMap(e,t,r,a,n,o,s,i,p,c){var d="",l="",m="",g="";for(markers=[],map=new google.maps.Map(document.getElementById("map_canvas"),{mapTypeId:google.maps.MapTypeId.ROADMAP}),google.maps.event.trigger(map,"resize"),map.setZoom(map.getZoom()),geocoder=new google.maps.Geocoder,u=0;u<e.length;u++)codeAddress(e[u],t[u],r[u],u,a[u],n[u],o[u],s[u],i[u],p[u],"",c[u]);for(var u=0;u<i.length;u++)(i[u]>d||""===d)&&(d=i[u]),(i[u]<l||""===l)&&(l=i[u]);for(u=0;u<p.length;u++)(p[u]>m||""===m)&&(m=p[u]),(p[u]<g||""===g)&&(g=p[u]);""!==d&&""!==l&&""!==m&&""!==g&&(map.setCenter(new google.maps.LatLng((d+l)/2,(m+g)/2)),map.fitBounds(new google.maps.LatLngBounds(new google.maps.LatLng(l,g),new google.maps.LatLng(d,m))))}function deleteOverlays(){for(var e=0;e<markersArray.length;e++)markersArray[e].setMap(null);markersArray=[]}function codeAddress(e,t,r,a,n,o,s,i,p,c,d,l){void 0!==n&&void 0!==o&&""!==n&&""!==o&&null!==n&&null!==o?(n="Abningstider:<br />Man-Fre: "+n.substring(0,2)+":"+n.substring(2)+" - ",o=o.substring(0,2)+":"+o.substring(2)):(n="",o=""),void 0!==s&&void 0!==i&&""!==s&&""!==i&&null!==s&&null!==i?(s="<br />"+decodeURIComponent("L%C3%B8rdag")+": "+s.substring(0,2)+":"+s.substring(2)+" - ",i=i.substring(0,2)+":"+i.substring(2)):(s="",i="");var m='<div class="infoWindow"';(n+o+s+i).length>0&&(m+='  style="width: 140px;"'),m+=">"+n+o+s+i+"<div>";var g=new google.maps.InfoWindow({content:m}),u=new google.maps.LatLng(p,c),h=new google.maps.Marker({map:map,position:u,animation:google.maps.Animation.DROP,icon:"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+(a+1)+"|FF0000|000000",serviceId:l});void 0===r&&(r=""),void 0===t&&(t=""),markers.push(h),google.maps.event.addListener(h,"click",function(){selected=this;var e=0,t=0;for(;e<markers.length;)markers[e].serviceId===this.serviceId&&(t=e),e<20&&(markers[e].setZIndex(15),markers[e].setAnimation(null),markers[e].setIcon("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+(e+1)+"|FF0000|000000")),e++;this.setIcon("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+(t+1)+"|336699|FFFFFF"),this.setZIndex(100),r=this,jQuery(document).ready(function(){jQuery('input[name="postdanmark_pickupLocation"][value="'+r.serviceId+'"]')[0].checked=!0,jQuery(".radio_point_container").removeClass("sel"),jQuery(jQuery('input[name="postdanmark_pickupLocation"][value="'+r.serviceId+'"]')[0]).parent().parent().parent().parent().parent().addClass("sel")});var r}),google.maps.event.addListener(h,"click",function(){"undefined"!=typeof currentIw&&currentIw.close(),'<div class="infoWindow"><div>'!==g.content&&(g.open(map,h),currentIw=g)})}function selectMarker(e){for(var t=!1,r=0;r<markers.length;)markers[r].setAnimation(null),r<20&&(markers[r].setZIndex(15),markers[r].setIcon("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+(r+1)+"|FF0000|000000")),markers[r].serviceId==e&&(t=r),r++;!1!==t&&(google.maps.event.trigger(markers[t],"click"),selected=markers[t],markers[t].setZIndex(100),markers[t].setIcon("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+(t+1)+"|336699|FFFFFF"),void 0!==startpoint&&calcRoute(startpoint,markers[t])),jQuery(document).ready(function(){jQuery('input[name="postdanmark_pickupLocation"][value="'+e+'"]')[0].checked=!0,jQuery(".radio_point_container").removeClass("sel"),jQuery(jQuery('input[name="postdanmark_pickupLocation"][value="'+e+'"]')[0]).parent().parent().parent().parent().parent().addClass("sel")})}